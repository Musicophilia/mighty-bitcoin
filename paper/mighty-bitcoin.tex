\documentclass[12pt]{article}
\usepackage[margin=1in]{geometry}
\usepackage{amsmath}
\usepackage{enumitem}

\newcommand*{\Attack}{A}
\newcommand*{\Time}{T}
\newcommand*{\ABtcOrig}{{B_0}}
\newcommand*{\ABtcEarned}{{B_{\mathrm{E}}}}
\newcommand*{\ABtcStolen}{{B_{\mathrm{S}}}}
\newcommand*{\ABtcTotal}{{B_{\mathrm{T}}}}
\newcommand*{\NumBtc}{{N_{\mathrm{BTC}}}}
\newcommand*{\BlkReward}{{R}}
\newcommand*{\ExchgRate}{{V_{\mathrm{BTC}}}}
\newcommand*{\AsicValue}{{V_{\mathrm{ASIC}}}}
\newcommand*{\TimeCashOut}{{T_{\mathrm{Cash}}}}
\newcommand*{\TimeSellAsics}{{T_{\mathrm{Sell}}}}
\newcommand*{\Utility}{U}
\newcommand*{\AttackUtility}{{U_{\mathrm{Attack}}}}
\newcommand*{\PayoffBtc}{{P_{\mathrm{BTC}}}}
\newcommand*{\PayoffAsic}{{P_{\mathrm{ASIC}}}}

\newcommand*{\E}[1]{\mathrm{E}\left[#1\right]}

\newenvironment{defs}
  { \begin{enumerate}[labelindent=0pt,labelwidth=2.5in,itemindent=0em,align=parleft,leftmargin=!] }
  { \end{enumerate} }

\title{Mighty Bitcoin}
\author{Karen Wang, Brandon Azad, Lisa Wang, Nishith Khandwala}
\date{\today}

\begin{document}

\maketitle

\section{Utility of Attacking}

Assumptions:
\begin{enumerate}
  \item
    Future utility is discounted according to a discount rate $\gamma$.
  \item
    The mining power of the Bitcoin network is divided among a fixed set of
    ASICs. ASICs are neither added nor destroyed, just sold between miners.
    Thus, the total mining power of the Bitcoin network remains constant for
    the duration of the model.
  \item
    Every miner assigns the same price (in USD) to a given ASIC. This price is
    determined solely by the ASIC's power, the BTC-USD exchange rate, and the
    discount factor.
    More precisely, each miner values an ASIC depending on how long, at the
    current BTC-USD exchange rate, it would take for the ASIC to pay for
    itself. We intend to guess this valuation function based on real world
    prices for Bitcoin ASICs.
  \item
    Every miner values an ASIC with mining power $\alpha$ according to the
    expected number of USD the ASIC will earn the miner after $L$ days, assuming:
    \begin{enumerate}
      \item
        a block is mined every 10 minues;
      \item
        the ASIC earns the miner a share $\alpha$ of the block reward;
      \item
        future utility is discounted by a factor of $\gamma$; and
      \item
        the BTC-USD exchange rate remains constant.
    \end{enumerate}
  \item
    If the attacker attacks, then the rest of the Bitcoin network will
    immediately detect the attack and know the number of bitcoin ``stolen''
    (that is, the number of bitcoin that were awarded to the attacker by virtue
    of the attack).
  \item
    The attacker already has a fraction $\ABtcOrig$ of the total BTC
    before the attack.
  \item
    The attacker already has a fraction $\alpha > 0$ of the total mining power
    before the attack.
  \item
    The attacker gets value only in USD, not BTC. Thus, after the attack, the
    attacker will sell the ASICs and BTC to gain value in USD.
  \item
    The attacker can spend any earned rewards immediately. That is, we ignore
    the fact that coinbase transactions are locked until they have 100
    confirmations.
  \item
    There are a total of $\NumBtc$ bitcoin in existence, and the current rate
    of mining does not change this value significantly. Thus, we assume that
    the total number of bitcoin is constant.
\end{enumerate}

Data points:

\begin{enumerate}
  \item
    % http://www.coindesk.com/dao-attacked-code-issue-leads-60-million-ether-theft/
    % https://bitcoinmagazine.com/articles/ethereum-s-dao-forking-crisis-the-bitcoin-perspective-1467404395
    % https://en.wikipedia.org/wiki/The_DAO_(organization)
    % https://www.cryptocoinsnews.com/ex-ethereum-developer-dao-hack-happened-comes-next/
    % https://www.worldcoinindex.com/coin/ethereum
    The Ethereum DAO hack stole about $4\%$ of all ether, and the exchange rate
    almost immediately dropped by almost $50\%$.
    This attack is not directly comparable since it is a hack rather than a
    mining attack.
  \item
    % http://www.coinwarz.com/calculators/bitcoin-mining-calculator/?h=14000.00&p=1350.00&pc=0.25&pf=0.20&d=199312067531.24300000&r=12.50000000&er=577.18000000&hc=2100.00
    % ROI: 187 days (coinwarz)
    AntMiner S5: 1.155 Th/s: \$150
  \item
    % ROI: 122 days (coinwarz)
    AntMiner S7: 4.73 Th/s: \$400
  \item
    % ROI: just above 1 year (https://www.hobbymining.com/bitmain-antminer-s9/)
    % ROI: 233 days (coinwarz)
    AntMiner S9: 13 Th/s: \$2100
\end{enumerate}

Define the following independent variables:

\begin{defs}
  \item[{$\alpha \in (0, \frac{1}{2})$}]
    The mining power of the attacker.
  \item[{$\Attack \in \{0, 1\}$}]
    Whether or not the attacker attacks.
  \item[{$\gamma \in (0, 1]$}]
    The discount rate per time step.
  \item[{$\Time \in [0, \infty)$}]
    The current day.
  \item[{$\ABtcOrig \in [0, 1]$}]
    The fraction of all bitcoin owned by the attacker before $T = 0$.
  \item[{$\NumBtc$}]
    The total number of bitcoin in existence.
\end{defs}

Then the following model parameters and definitions:

\begin{defs}
  \item[{$\ABtcEarned(\Attack, \alpha) \in [0, 1 - B_0]$}]
    The fraction of all bitcoin stolen by the attacker (if Attack = 1) or
    earned by the attacker (if Attack = 0) at $\Time = 0$.
  \item[{$\ABtcStolen(\Attack, \alpha)
      = \Attack \cdot \ABtcEarned$}]
    The fraction of all bitcoin stolen by the attacker.
  \item[{$\ABtcTotal(\Attack, \alpha)
      = \ABtcOrig + \ABtcEarned$}]
    The total fraction of all bitcoin controlled by the attacker at $\Time = 0$.
  \item[{$\ExchgRate(\ABtcStolen, \Time) \in [0, \infty)$}]
    The BTC-USD exchange rate. More precisely, the value of one bitcoin in US
    dollars at time $\Time$ given that the fraction $\ABtcStolen$ of all
    bitcoin was stolen at time $\Time = 0$.
  \item[{$\AsicValue(\alpha, \ExchgRate, \gamma) \in [0, \infty)$}]
    The value in USD of a collection of Bitcoin mining ASICs with mining power $\alpha$.
  \item[{$\PayoffBtc(\Attack, \alpha, \TimeCashOut)
      = \ABtcTotal \cdot \NumBtc \cdot \ExchgRate$}]
    The payout for the attacker of cashing in their bitcoin at time $\TimeCashOut$.
  \item[{$\PayoffAsic(\Attack, \alpha, \gamma, \TimeSellAsics)
      = \AsicValue$}]
    The payout for the attacker of selling their ASICs at time $\TimeSellAsics$.
\end{defs}

Under the assumptions stated above, we can calculate the expected payoff of a mining ASIC:
\begin{align*}
  \AsicValue(\alpha, \ExchgRate, \gamma)
  & = \E{\sum_{\Time=0}^L \alpha \cdot \BlkReward \cdot 144 \cdot \ExchgRate \cdot \gamma^\Time} \\
  & = \E{\alpha \cdot \BlkReward \cdot 144 \cdot \ExchgRate \cdot \frac{1 - \gamma^{L+1}}{1 - \gamma}} \\
  & = \alpha \cdot \BlkReward \cdot 144 \cdot \ExchgRate \cdot \frac{1 - \gamma^{L+1}}{1 - \gamma}.
\end{align*}

Suppose the attacker attacks at $\Time = 0$, cashes out from BTC to USD at
$\Time = \TimeCashOut$, and sells the ASICs at time $\Time = \TimeSellAsics$.
We define the discounted utility for the attacker as a function
$\Utility(\Attack)$:

\[
  \Utility(\Attack) =
  \max_{\TimeCashOut, \TimeSellAsics}
    \left[
        \PayoffBtc(\Attack, \alpha, \TimeCashOut)
          \cdot \gamma^\TimeCashOut
        + \PayoffAsic(\Attack, \alpha, \gamma, \TimeSellAsics)
          \cdot \gamma^\TimeSellAsics
    \right]
\]

We define the utility of attacking over mining as:

\[
  \AttackUtility = \Utility(1) - \Utility(0)
\]

We assume that the attacker will attack if and only if $\AttackUtility$ is
strictly positive.

\end{document}
